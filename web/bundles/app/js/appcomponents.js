!function(){function e(e,t,r,o){t.html5Mode(!1),e.when("/",{redirectTo:"/login"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/logout",{templateUrl:"views/logout.html",controller:"LogoutCtrl"}).when("/home/:id?",{templateUrl:"views/home.html",controller:"HomeCtrl",requiresAuthentication:!0,permissions:["ROLE_USER"]}).when("/establecimiento/:id?",{templateUrl:"views/establecimiento.html",controller:"EstCtrl",requiresAuthentication:!0,permissions:["ROLE_USER"]}).when("/establecimientos",{templateUrl:"views/establecimientos.html",controller:"EstablecimientosCtrl",requiresAuthentication:!0,permissions:["ROLE_RC"]}).when("/usuarios/:id?",{templateUrl:"views/usuarios.html",controller:"UsersCtrl",requiresAuthentication:!0,permissions:["ROLE_ADMIN"]}).when("/usuario/nuevo",{templateUrl:"views/nuevo-user.html",controller:"RegisterCtrl",requiresAuthentication:!0,permissions:["ROLE_ADMIN"]}).when("/password",{templateUrl:"views/password.html",controller:"PassCtrl",requiresAuthentication:!0,permissions:["ROLE_USER"]}).when("/notfound",{templateUrl:"views/404.html"}).otherwise({redirectTo:"/notfound"}),r.interceptors.push("authInterceptor")}function t(e,t,r,o){return{request:function(e){return e.headers=e.headers||{},e},responseError:function(e){return 404===e.status?(o.path("/"),t.reject(e)):t.reject(e)}}}function r(e,t,r){r.init(),e.$on("$routeChangeStart",function(e,t){r.checkPermissionForView(t)||(console.log("no tiene permisos"),e.preventDefault())})}angular.module("boilerplate",["ngRoute","ngResource","ngStorage","ngTable","720kb.datepicker","nemLogging","ui-leaflet"]).config(e),e.$inject=["$routeProvider","$locationProvider","$httpProvider","$compileProvider"],angular.module("boilerplate").factory("authInterceptor",t),t.$inject=["$rootScope","$q","LocalStorage","$location"],angular.module("boilerplate").run(r),r.$inject=["$rootScope","$location","Auth"]}(),function(){angular.module("boilerplate").constant("CONSTANTS",{API_URL:"",LOGIN_URL:"/api/auth/login_check",USERS_URL:"/api/v1/users",CHANGEPASS_URL:"/api/v1/users/change_password",CATALOGO_URL:"/api/v1/catalogos",ESTABLECIMIENTO_URL:"/api/v1/establecimientos"})}(),function(){"use strict";function e(e,t){function r(t,r){return u||console.log("localStorage not supported, make sure you have the $cookies supported."),null===window.localStorage.getItem(t)?e.localStorage&&e.localStorage.setItem(t,angular.toJson(r)):void console.warn("localStorage with the name "+t+" already exists. Please pick another name.")}function o(t){return u||console.log("localStorage not supported, make sure you have the $cookies supported."),e.localStorage&&angular.fromJson(e.localStorage.getItem(t))}function n(t,r){return u||console.log("localStorage not supported, make sure you have the $cookies supported."),e.localStorage&&e.localStorage.setItem(t,angular.toJson(r))}function i(t){return u||console.log("localStorage not supported, make sure you have the $cookies supported."),e.localStorage&&e.localStorage.removeItem(t)}function l(){return u||console.log("localStorage not supported, make sure you have the $cookies supported."),e.localStorage&&e.localStorage.clear()}function a(){return e.localStorage}var c="undefined"==typeof window.localStorage?void 0:window.localStorage,u=!(void 0===typeof c||void 0===typeof window.JSON);return angular.element(e).on("storage",function(e,r){e.key===r&&t.$apply()}),{set:r,get:o,update:n,remove:i,removeAll:l,list:a}}angular.module("boilerplate").factory("LocalStorage",["$window","$rootScope",e])}(),function(){"use strict";function e(e,t,r){function o(o,n,i,l){var a=t.defer();return e({method:o,url:r.API_URL+n,params:i,data:l}).then(function(e){e.config||console.log("Server error occured."),a.resolve(e)},function(e){a.reject(e)}),a.promise}var n={query:o};return n}angular.module("boilerplate").factory("QueryService",["$http","$q","CONSTANTS",e])}(),function(){"use strict";function e(e,t){var r={restrict:"A",replace:!1,link:function(t,r,o,n){t.$watch(function(){return e.path()},function(t,o){var n=["#!"+e.path(),"#"+e.path(),e.path()];angular.forEach(r.find("a"),function(e){e=angular.element(e),-1!==n.indexOf(e.attr("href"))?e.parent("li").addClass("active"):e.parent("li").removeClass("active")})})}};return r}angular.module("boilerplate").directive("bsActiveLink",e),e.$inject=["$location","$rootScope"]}(),function(){"use strict";angular.module("boilerplate").directive("mainNav",["Auth",function(e){return{restrict:"E",scope:{},controller:["$scope",function(t){t.user=e.currentUser(),t.roles=t.user.roles}],templateUrl:"components/directives/main-nav.html"}}])}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"components/directives/responsive-nav.html",link:function(e,t,r,o){t.on("click",function(e){$(".responsive-wrapper").slideToggle(150,"swing"),e.preventDefault()})}};return e}angular.module("boilerplate").directive("responsiveNav",e)}(),function(){"use strict";function e(e){var t={restrict:"A",scope:{permission:"="},link:function(t,r,o){t.$watch(e.isLoggedIn,function(){e.userHasPermission(t.permission)?r.show():r.hide()})}};return t}angular.module("boilerplate").directive("permission",e),e.$inject=["Auth"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,r,o){t.isLoading=function(){return e.pendingRequests.length>0},t.$watch(t.isLoading,function(e){e?r.show():r.hide()})}}}angular.module("boilerplate").directive("loading",e),e.$inject=["$http"]}(),function(){"use strict";function e(){return{restrict:"A",priority:-1,require:"ngForm",controller:t}}function t(e,t,r,o){function n(){var o=t(r.trackedTable).assign;o(e,f),e.$on("$destroy",function(){o(e,f)}),f.reset=a,f.isCellDirty=l,f.setCellDirty=c,f.setCellInvalid=u,f.untrack=d}function i(e,t){return _.find(t,function(t){return t.row===e})}function l(e,t){var r=i(e,m);return r&&r.cells.indexOf(t)!==-1}function a(){m=[],g=[],p(!1)}function c(e,t,r){s(e,t,r,m)}function u(e,t,r){s(e,t,r,g),p(g.length>0)}function s(e,t,r,o){var n=i(e,o);(n||r)&&(r?(n||(n={row:e,cells:[]},o.push(n)),n.cells.indexOf(t)===-1&&n.cells.push(t)):(_.remove(n.cells,function(e){return t===e}),0===n.cells.length&&_.remove(o,function(e){return n===e})))}function p(e){f.$invalid=e,f.$valid=!e}function d(e){_.remove(g,function(t){return t.row===e}),_.remove(m,function(t){return t.row===e}),p(g.length>0)}var f=this,m=(o.controller("form"),[]),g=[];n()}angular.module("boilerplate").directive("trackedTable",e),e.$inject=[],t.$inject=["$scope","$parse","$attrs","$element"]}(),function(){"use strict";function e(){return{restrict:"A",priority:-1,require:["^trackedTable","ngForm"],controller:t}}function t(e,t,r,o){function n(e){return u.isCellDirty(c,e)}function i(e,t){u.setCellDirty(c,e,t)}function l(e,t){u.setCellInvalid(c,e,t)}var a=this,c=r(e.trackedTableRow)(o),u=(t.controller("form"),t.controller("trackedTable"));a.isCellDirty=n,a.setCellDirty=i,a.setCellInvalid=l}angular.module("boilerplate").directive("trackedTableRow",e),e.$inject=[],t.$inject=["$attrs","$element","$parse","$scope"]}(),function(){"use strict";function e(){return{restrict:"A",priority:-1,require:["^trackedTableRow","ngForm"],controller:t}}function t(e,t,r){var o=t.controller("form"),n=o.$name,i=t.controller("trackedTableRow");i.isCellDirty(n)?o.$setDirty():o.$setPristine(),r.$watch(function(){return o.$dirty},function(e,t){e!==t&&i.setCellDirty(n,e)}),r.$watch(function(){return o.$invalid},function(e,t){e!==t&&i.setCellInvalid(n,e)})}angular.module("boilerplate").directive("trackedTableCell",e),e.$inject=[],t.$inject=["$attrs","$element","$scope"]}();